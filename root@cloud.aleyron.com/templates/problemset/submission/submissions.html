{% extends 'problemset/layout.html' %}

{% block content %}
  <div class="container" style="padding-top: 12px">
    {% include 'problemset/problemset_nav.html' %}
    {% if messages %}
      {% for message in messages %}
        <div class="alert {% if message.tags %} {{ message.tags }}{% endif %}" role="alert">{{ message }}</div>
      {% endfor %}
    {% endif %}
    <h3 class="h3">Status</h3>
    <div>
      <table class="table table-hover table-striped table-sm">
        <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">User</th>
          <th scope="col">Task</th>
          <th scope="col">Status</th>
        </tr>
        </thead>
        <tbody>
        {% for submission in submissions %}
          <tr onclick="document.location = '{% url 'problemset.views.submission' pk=submission.pk %}';"
              style="cursor: pointer"
              {% if submission.submission.verdict == Submission.OK %}class="table-success"
              {% elif submission.submission.verdict == Submission.WA %}class="table-danger"
              {% elif submission.submission.verdict == Submission.RE %}class="table-danger"
              {% elif submission.submission.verdict == Submission.TLE %}class="table-danger"
              {% elif submission.submission.verdict == Submission.MLE %}class="table-danger"
              {% elif submission.submission.tested %}class="table-warning"
              {% elif submission.submission.testing %}class="table-info"
              {% endif %}
          >
            <td>{{ submission.pk }}</td>
            <td>{{ submission.user_profile }}</td>
            <td>{{ submission.problemset_task }}</td>
            <td>
              {% if submission.submission.tested %}
                {{ submission.submission.verdict_message }}
              {% elif submission.submission.testing %}
                Testing
              {% else %}In queue{% endif %}
            </td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}